<app-header-toolbar></app-header-toolbar>
<div style="width: 100vw; height: 90vh;   overflow: auto; background: rgba(235,233,234, 0.3);">
  <form #userCadForm="ngForm" >
    <div fxLayout="row" fxLayoutAlign="center center">
      <div fxFlex="70">
        <my-form-header label="Cadastro Cliente"></my-form-header>
        <div fxLayout="row" >
          <mat-form-field fxFlex="32">
            <input matInput 
            [ngModel] = "user.cpf" 
            ngDefaultControl 
            name="cpf" 
            placeholder="CPF" 
            (blur)="checkUser(userCadForm)" 
            [formControl]="cpfFormControl">
            
            <mat-error *ngIf="cpfFormControl.hasError('required')">
                CPF/CNPJ <strong>obrigatório</strong>
            </mat-error>

            <mat-error *ngIf="cpfFormControl.hasError('cpfcnpjInvalid') && !cpfFormControl.hasError('required')">
                CPF/CNPJ <strong>inválido</strong>
            </mat-error>

          </mat-form-field>

          <mat-form-field fxFlexOffset="2" fxFlex="70">
            <input matInput 
            [(ngModel)] = "user.nome" 
            autocomplete='name'
            ngDefaultControl
            name="nome" 
            placeholder="Nome completo do cliente" 
            [formControl]="nomeFormControl">
          
            <mat-error *ngIf="nomeFormControl.hasError('required')">
                Nome <strong>obrigatório</strong>
            </mat-error>

          </mat-form-field>  
        </div>

        <div fxLayout="row">
          <mat-form-field fxFlex>
            <input matInput 
            [(ngModel)] = "user.telefone" 
            ngDefaultControl 
            name="telefone" 
            placeholder="Telefone primário"  
            [formControl]="telFormControl"
            (keyup) = "typingPhone()"
             >
            
            <mat-error *ngIf="telFormControl.hasError('required')">
              Telefone Primário é <strong>obrigatório</strong>
            </mat-error>

            <mat-error *ngIf="emailFormControl.errors &&  !emailFormControl.hasError('required')">
              Please enter a valid email address
            </mat-error>

          </mat-form-field>

        <mat-form-field fxFlex fxFlexOffset="2">
            <input matInput 
              [(ngModel)] = "user.telSecundario" 
              ngDefaultControl 
              name="telSecundario" 
              placeholder="Telefone secundário">
        </mat-form-field>

          <mat-form-field fxFlex fxFlexOffset="2">
            <input matInput 
            [(ngModel)] = "user.email"  
            name="email" 
            placeholder="Email" 
            [formControl]="emailFormControl">

            <mat-error *ngIf="emailFormControl.hasError('required')">
              Email é <strong>obrigatório</strong>
            </mat-error>

            <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
              Email <strong>inválido</strong>
            </mat-error>

          </mat-form-field>

      </div>

      <div fxLayout="row">

        <mat-form-field fxFlex [hideRequiredMarker]="true">
            <input matInput 
              [(ngModel)] = "user.endereco" 
              ngDefaultControl 
              name="endereco" 
              placeholder="Endereço completo"
              required>
        </mat-form-field>

      </div>

      <div fxLayout="row" fxLayoutAlign="end center" *ngIf=((!update)) >
        <my-button-orange 
          fxFlexAlign="center" 
          label="CADASTRAR CLIENTE" 
          style="margin-top: 12px;" 
          (click)="userForm(userCadForm)">
        </my-button-orange>
      </div>
      <div fxLayout="row" fxLayoutAlign="end center" *ngIf=((update)) >
        <my-button-orange 
          fxFlexAlign="center" 
          label="ATUALIZAR CLIENTE" 
          style="margin-top: 12px;" 
          (click)="updateUser(userCadForm)">
        </my-button-orange>
      </div>
      </div>
    </div>

  </form >

  <form #orcaCadForm="ngForm" >
    <div class="row" fxLayoutAlign="center center">
      <div fxFlex = "70">
        <my-form-header label="Informações do Orçamento"></my-form-header>
          <div class="row" >

            <mat-form-field fxFlex="32" [hideRequiredMarker]="true">
              <input matInput 
              name="cpf" 
              [(ngModel)]="orca.cpf" 
              ngDefaultControl 
              placeholder="CPF do Cliente"  
              (blur)="checkUser(orcaCadForm)"
              required>
            </mat-form-field>

<!--             <my-input-text fxFlex 
              name="defeito" 
              [(ngModel)]="orca.defeito" 
              ngDefaultControl 
              fxFlexOffset=2 
              label="Qual o defeito apresentado?"
              required> 
            </my-input-text> -->

            <mat-form-field fxFlex fxFlexOffset=2 [hideRequiredMarker]="true">
              <input matInput 
              name="defeito" 
              [(ngModel)]="orca.defeito" 
              ngDefaultControl 
              placeholder="Qual o defeito apresentado"  
              required>
            </mat-form-field>

          </div>

          <div class="row" >


            <mat-form-field fxFlex="32" [hideRequiredMarker]="true">
              <input matInput 
              name="marca" 
              [(ngModel)]="orca.marca" 
              ngDefaultControl 
              placeholder="Marca"  
              required>
            </mat-form-field>


            <mat-form-field 
              name="data" 
              [(ngModel)]="orca.data" 
              ngDefaultControl 
              fxFlexOffset="2" 
              fxFlex
              required>

              <input matInput 
              [matDatepicker]="picker" 
              name="data"
              [(ngModel)]="orca.data" 
              placeholder="Data de visita"
              required>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <mat-form-field fxFlexOffset="2" fxFlex [hideRequiredMarker]="true">
              <input matInput 
              name="marca" 
              [(ngModel)]="orca.modelo" 
              ngDefaultControl 
              placeholder="Modelo"  
              required>
            </mat-form-field>


          </div>

          <div class="row">


           <mat-form-field fxFlex="32">
              <mat-select 
                required
                placeholder="Período"  
                [(ngModel)]="orca.periodo" 
                name="periodo" >
                <mat-option 
                  *ngFor="let value of values" 
                  [(value)]="value.value" 
                  [ngStyle]="{width: width + 'px'}">
                  {{ value.viewValue }}
                </mat-option>
              </mat-select>
            </mat-form-field> 

<!--             <my-input-text 
              fxFlex="32" 
              name ="periodo" 
              [(ngModel)] ="orca.periodo" 
              ngDefaultControl 
              label="Período de disponibilidade" 
              required> 
            </my-input-text> -->

            <div fxFlex="grow"></div>

            <my-button-orange 
              fxFlexAlign="center" 
              label="CONTINUAR ORÇAMENTO" 
              (click)="orcaForm(orcaCadForm)">
                
            </my-button-orange>

          </div>

        </div>
      </div>

  </form> 
</div>